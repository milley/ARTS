# 理解画图程序实战v26

最近看了许式伟老师的架构课，其中实战部分是从一个画图程序开始讲起。之前看了大多数是理论层面的内容，突然一下子接触到代码感觉还是有点跳跃，本文先从v26分支上试着分析下代码中实现的功能。

代码见[v26分支](https://github.com/qiniu/qpaint/tree/v26)

## 1. 服务端

服务端程序就一个main.go文件，引入了net相关的http,url,httputil几个包。首先程序先注册了一个/api/的请求路径，使用http.StripPrefix来执行这个路径的请求。StripPrefix会把request的URL前缀/api/去掉后请求后返回。这里的apiReverseProxy定义了一个反向代理为<http://localhost:9999>。调用http.HandleFunc将根目录/注册到调用handleDefault方法，其实等于是访问www/index.htm页面。
